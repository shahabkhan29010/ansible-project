---
- name: Configure BGP between NXOS & IOS devices
  hosts:
    - spine
    - router
  connection: network_cli
  gather_facts: no

- hosts: lab-sw01  
  vars_files:
    - vars/vars_nxos_sw01_bgp.yml
    - vars/vars_prefix_ad.yml
  tasks:
    - name: Enable & configure BGP in Spine01
      when: inventory_hostname == 'lab-sw01'
      import_tasks: tasks/tasks_nxos_bgp.yml

- hosts: lab-sw02  
  vars_files:
    - vars/vars_nxos_sw02_bgp.yml
    - vars/vars_prefix_ad.yml
  tasks:
    - name: Enable & configure BGP in Spine02
      when: inventory_hostname == 'lab-sw02'
      import_tasks: tasks/tasks_nxos_bgp.yml

- hosts: lab-r01
  vars_files:
    - vars/vars_ios_bgp.yml
  tasks:
    - name: Configure BGP in IOS
      when: inventory_hostname == 'lab-r01'
      import_tasks: tasks/task_ios_bgp.yml
